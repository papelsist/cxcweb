<mat-card *ngIf="devolucion$ | async as rmd">
  <div class="header">
    <section class="rmd" fxLayout fxLayoutGap="10px">
      <span
        >RMD: <strong>{{ rmd.documento }}</strong></span
      >
      <span>{{ rmd.nombre }}</span>
      <span>Sucursal {{ rmd.sucursal.nombre }}</span>
      <span>Fecha: {{ rmd.fecha | date: 'dd/MM/yyyy' }}</span>
    </section>

    <section class="venta">
      <span>Venta: {{ rmd.venta.folio }}</span>
      <span class="factura">
        Factura: {{ rmd.venta.cuentaPorCobrar.cfdi.serie }}-{{
          rmd.venta.cuentaPorCobrar.cfdi.folio
        }}
      </span>
      <span>Moneda: {{ rmd.venta.moneda }}</span>
      <span> Total Facturado: {{ rmd.venta.total | currency }}</span>

      <span>UUID: {{ rmd.venta.cuentaPorCobrar.cfdi.uuid }}</span>
    </section>
    <section>
      <span> Tipo de devolución: {{ rmd.parcial ? 'PARCIAL' : 'TOTAL' }} </span>
      <span>Moneda: {{ rmd.venta.moneda }}</span>
      <span>Total: {{ rmd.total }}</span>
    </section>

    <section class="nota-de-credito" *ngIf="rmd.nota as nota">
      <span>Nota de crédito: </span>
      <ng-container *ngIf="nota.cfdi as cfdi; else notaPendiente">
        <span>Serie: {{ cfdi.serie }}</span>
        <span>Folio: {{ cfdi.folio }}</span>
        <span>UUID: {{ cfdi.uuid }}</span>
      </ng-container>
      <ng-template #notaPendiente>
        <strong>PENDIENTE</strong>
      </ng-template>
    </section>
  </div>

  <div class="partidas">
    <nx-papelsa-rmd-partidas-grid
      [partidas]="rmd.partidas"
    ></nx-papelsa-rmd-partidas-grid>
    <!-- <pre>
      {{ rmd.partidas | json }}
    </pre> -->
  </div>

  <mat-card-actions>
    <button mat-button>
      <mat-icon>arrow_back</mat-icon>
      <span>Regresar</span>
    </button>
    <button mat-button>
      Generar Nota
    </button>
    <button mat-button>
      Imprimir
    </button>
    <button mat-button>
      XML
    </button>
    <button mat-button>
      Descargar CFDI
    </button>
    <button mat-button>
      Enviar CFDI
    </button>
  </mat-card-actions>
</mat-card>
